(* Promotion only  :*)

macro QUERY () =
     {!"G"}.
     {SELF ?C0:String ?P0:String !"T0"}.
     {?any}*.
     {SELF ?C1:String ?P1:String !"T1"}.
     {?any}*.
     {SELF ?C2:String ?P2:String !"T2" where
             (diff (string2natset (P2), union(string2natset (P0),string2natset (P1))) <> empty)
     }
end_macro

macro FINAL_STATE () =
    [ not { SELF ... } ] false
end_macro

<
    (true* . QUERY . true*)+
> FINAL_STATE
