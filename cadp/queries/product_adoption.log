
property PRODUCT_ADOPTION
 | Product adoption

svl clean info: [temporary] svl001_formula_inline

svl clean info: [temporary] svl001_formula_inline.mcl

svl clean info: [temporary] svl001_formula_inline.xm

"svl001_formula_inline.mcl" =
    macro QUERY () =
        (
    	(* Artificial action creating the initial groups *)
    	G .
    
    	(* Step to the relevant time window T-1 -- T -- T+1 *)
    	(not { SELF ... })* .
    
    	(* Customers & products in a group on period T-1 *)
    	{ SELF ?C_t_m_1:String ?P_t_m_1:String !":2018-09-01" }.
    
    	(* Step to the next period T *)
    	not { SELF ... } .
    
    	(* Customers & products in a (successor) group on period T *)
    	{ SELF ?C_t:String ?P_t:String !":2018-12-01" where
    	    (* P_t contains some promotional products *)
    	    (inter (string2natset (P_t), string2natset (":3461025:7461024:")) <> empty)
    	    and
    	    (* The group on period T-1 did not buy promotional products *)
    	    (inter (string2natset (P_t_m_1), string2natset (":3461025:7461024:")) = empty)
    	    and
    	    (* There are some customers common to C_t_m_1 and C_t *)
    	    (inter (string2natset (C_t_m_1), string2natset (C_t)) <> empty)
    	}
        )
    end_macro
    
    (* Explore all the paths matching the query and print
     * the sets of customers that adopted promotional products during T *)
    
    [
        QUERY
    ] print (
        (* Customers that adopted promotional products *)
        inter (string2natset (C_t_m_1), string2natset (C_t)),
        " ",
        (* The subset of promotional products they bought *)
        inter (string2natset (P_t), string2natset (":3461025:7461024:")),
        " ",
        (* The promotion period *)
        ":2018-12-01",
        "\n"
    )

verify "svl001_formula_inline.mcl" in "../graph/bcg/9M-5-[1-2001]-[a]-lcm.bcg"

svl clean info: [temporary] evaluator4

svl clean info: [temporary] evaluator4.o

% bcg_open   "../graph/bcg/9M-5-[1-2001]-[a]-lcm.bcg"  evaluator4 -source "product_adoption.svl:36" -dfs   "svl001_formula_inline.mcl"

svl clean info: [temporary] svl000_stdout
bcg_open: using ``/home/abdelouahab/cadp//bin.x64/evaluator4.a''
bcg_open: running ``evaluator4 -source product_adoption.svl:36 -dfs svl001_formula_inline.mcl'' for ``../graph/bcg/9M-5-[1-2001]-[a]-lcm.bcg''
[526900, 575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[526900, 575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[526900, 575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[526900] [3461025] :2018-12-01
[264552] [3461025] :2018-12-01
[336921, 575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[264552] [3461025] :2018-12-01
[264552] [3461025] :2018-12-01
[575459, 1044697] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459, 1044697] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[277744] [3461025] :2018-12-01
[277744] [3461025] :2018-12-01
[819320] [3461025] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[336921, 575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[211249] [7461024] :2018-12-01
[322520, 575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[211249] [7461024] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[277744] [3461025] :2018-12-01
[277744] [3461025] :2018-12-01
[575459, 1044697] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459, 1044697] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[575459, 819320] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[264552] [3461025] :2018-12-01
[264552] [3461025] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[277744] [3461025] :2018-12-01
[400827, 526900, 575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[526900, 575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[400827, 575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[526900] [3461025] :2018-12-01
[211249] [7461024] :2018-12-01
[211249] [7461024] :2018-12-01
[575459, 819320] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[400827, 575459, 1044697] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[211249] [7461024] :2018-12-01
[264552] [3461025] :2018-12-01
[575459, 819320] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[526900, 575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[264552] [3461025] :2018-12-01
[264552] [3461025] :2018-12-01
[264552] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[264552] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[526900] [3461025] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[575459] [3461025] :2018-12-01
[575459] [7461024] :2018-12-01
[211249] [7461024] :2018-12-01
[322520, 526900] [3461025] :2018-12-01

TRUE
command exit with status 0

